import projectImg from "../images/folder-outline.svg"
import { EventEmitter } from "../events/eventEmitter";



function projectRenderer(container){

    const renderProject = (projects, emitter) =>{
  
        container.textContent ="";
    
        projects.forEach((project) =>{      
            const projectElement = createProjectElement(project);
            container.appendChild(projectElement);
        });
        
        emitter.publish("projectDomChanged", null);
    }

    const createProjectElement = (project) => {
        const projectLi = document.createElement("li");
    
        const projectBtn = document.createElement("button");
        projectBtn.setAttribute("type", "button");
        projectBtn.id = `project${project.getId()}`

        const projectTitle = document.createElement("h3");
        projectTitle.textContent = `${project.name} (${project.getTasks().length})`;
        
        const img = document.createElement("img");
        img.src = projectImg;

        projectBtn.appendChild(img);
        projectBtn.appendChild(projectTitle);
        
        projectLi.appendChild(projectBtn);

        return  projectLi;
    }

    const addProject = (projectElement) => {
        container.appendChild(projectElement);
    }
    
    const removeProject = (projectId) => {
        const projectElement = container.querySelector(`#${projectId}`);
        container.removeChild(projectElement);
    }

    function notifyProjectLoad(emitter) {
        emitter.publish("pageDomLoad", null);
    }
}

function renderProjectNav(projectManager, emitter){
    const projects = projectManager.getAllProjects();
    const projectsDom = document.querySelector(".project-list");
    projectsDom.textContent ="";

    projects.forEach((project) =>{      
        const projectLi = document.createElement("li");

        const projectBtn = document.createElement("button");
        projectBtn.setAttribute("type", "button");
        projectBtn.id = `project${project.getId()}`

        const projectTitle = document.createElement("h3");
        projectTitle.textContent = `${project.name} (${project.getTasks().length})`;
        
        const img = document.createElement("img");
        img.src = projectImg;

        projectBtn.appendChild(img);
        projectBtn.appendChild(projectTitle);
        
        projectLi.appendChild(projectBtn);

        projectsDom.appendChild(projectLi); 
    });
    
   
    emitter.publish("projectDomChanged", null);
}



export{
    renderProjectNav,
}